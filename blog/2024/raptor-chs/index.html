<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> [ä¸­æ–‡ç‰ˆ] RAPTOR: Recursive Abstractive Processing for Tree-Organized Retrieval | Yu-Cheng Chang </title> <meta name="author" content="Yu-Cheng Chang"> <meta name="description" content="Stanford æå‡ºçš„ RAPTOR æ–¹æ³•é€ééè¿´åˆ†ç¾¤å’Œç¸½çµå»ºç«‹éšå±¤å¼æ–‡æœ¬æ¶æ§‹ï¼Œæœ‰æ•ˆè§£æ±ºå‚³çµ± RAG ç³»çµ±åœ¨æ–‡æœ¬åˆ‡å¡Šæ™‚çš„èªæ„è³‡è¨Šæµå¤±å•é¡Œã€‚è©²æ–¹æ³•ä½¿ç”¨è»Ÿåˆ†ç¾¤ã€UMAP é™ç¶­å’Œè²è‘‰æ–¯è³‡è¨Šæº–å‰‡ä¾†å„ªåŒ–æª¢ç´¢æ•ˆæœï¼Œåœ¨ä¿ç•™å®Œæ•´èªæ„çš„åŒæ™‚æå‡æª¢ç´¢æº–ç¢ºæ€§ã€‚"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://codepydog.github.io/blog/2024/raptor-chs/"> <script src="/assets/js/theme.js?a81d82887dd692e91686b43de4542f18"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Yu-Cheng</span> Chang </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">teaching </a> </li> <li class="nav-item "> <a class="nav-link" href="/people/">people </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">submenus </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/books/">bookshelf</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/blog/">blog</a> </div> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">[ä¸­æ–‡ç‰ˆ] RAPTOR: Recursive Abstractive Processing for Tree-Organized Retrieval</h1> <p class="post-meta"> Created on September 18, 2024 </p> <p class="post-tags"> <a href="/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a> Â  Â· Â  <a href="/blog/tag/rag"> <i class="fa-solid fa-hashtag fa-sm"></i> rag</a> Â  <a href="/blog/tag/retrieval"> <i class="fa-solid fa-hashtag fa-sm"></i> retrieval</a> Â  <a href="/blog/tag/clustering"> <i class="fa-solid fa-hashtag fa-sm"></i> clustering</a> Â  Â· Â  <a href="/blog/category/paper"> <i class="fa-solid fa-tag fa-sm"></i> paper</a> Â  <a href="/blog/category/chinese"> <i class="fa-solid fa-tag fa-sm"></i> chinese</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <div class="language-switcher" style="text-align: right; margin-bottom: 20px; padding: 8px 0; border-bottom: 1px solid #333;"> <span style="font-size: 14px; color: #888; margin-right: 8px;">ğŸŒ Language:</span> <strong style="color: #007bff; font-weight: 600;">ä¸­æ–‡</strong> <span style="color: #666; margin: 0 6px;">|</span> <a href="/blog/2024/raptor-en/" style="color: #007bff; text-decoration: none; font-weight: 500; transition: opacity 0.2s;" onmouseover="this.style.opacity='0.7'" onmouseout="this.style.opacity='1'">English</a> </div> <blockquote> <p><strong>ä¾†æºï¼š</strong> <a href="https://arxiv.org/abs/2401.18059" rel="external nofollow noopener" target="_blank">Paper</a> / <a href="https://github.com/parthsarthi03/raptor" rel="external nofollow noopener" target="_blank">Official GitHub</a></p> </blockquote> <p>é€™æ˜¯ä¸€ç¯‡ä¾†è‡ª Stanford çš„è«–æ–‡ï¼Œå…¨åç‚º <strong><a href="https://arxiv.org/abs/2401.18059" rel="external nofollow noopener" target="_blank">RAPTOR: Recursive Abstractive Processing for Tree-Organized Retrieval</a></strong>ã€‚ä»Šå¹´åˆå‰›å‡ºä¾†æ™‚çœ‹åˆ°å¾ˆå¤šäººåœ¨ Twitter ä¸Šåˆ†äº«ï¼ŒåŒæ™‚é€™ç¯‡ä¹Ÿè¢« ICLR æ¥å—ï¼Œéå¸¸å€¼å¾—é–±è®€ã€‚</p> <p>ç›¸ä¿¡è®€è€…æ‡‰è©²éƒ½å…·å‚™åŸºç¤çš„ RAG çŸ¥è­˜ï¼Œé€™é‚Šå°±ä¸ç‰¹åˆ¥è‘—å¢¨äº†ï¼Œç›´æ¥ä¾†è¬›è«–æ–‡çš„æ ¸å¿ƒå…§å®¹ã€‚</p> <h2 id="concept">Concept</h2> <h3 id="æœ¬æ–‡æƒ³è§£æ±ºçš„å•é¡Œsimple-rag-çš„ç¼ºé™·">æœ¬æ–‡æƒ³è§£æ±ºçš„å•é¡Œï¼šSimple RAG çš„ç¼ºé™·</h3> <blockquote> <p>Despite a diversity in methods, the retrieving components of models predominantly rely on standard approaches, i.e., chunking corpora and encoding with BERT-based retrievers. Although this approach is widely adopted, Nair et al. (2023) highlights a potential shortcoming: contiguous segmentation might not capture the complete semantic depth of the text.</p> </blockquote> <p>RAG çš„å¤§è‡´è£½ä½œæµç¨‹åŒ…å«ï¼šå°‡æ–‡æœ¬åˆ†å¡Š â†’ å»ºç«‹ embedding â†’ query é€²ä¾†æ™‚ï¼Œå°‹æ‰¾ç›¸é—œçš„æ–‡æœ¬ç•¶ä½œ contextã€‚ç„¶è€Œå°‡æ–‡æœ¬åˆ†å¡Šæ™‚ï¼Œå¿…ç„¶æœƒç”¢ç”Ÿä¸Šä¸‹æ–‡èªæ„ä¸Šçš„è³‡è¨Šæµå¤±ï¼Œå°è‡´æ‰¾ä¸åˆ°ç›¸é—œçš„æ–‡æœ¬æˆ–è³‡è¨Šä¸å®Œæ•´ã€‚</p> <p>å› æ­¤é€™ç¯‡è«–æ–‡æƒ³è¦è§£æ±ºçš„å•é¡Œå°±æ˜¯ï¼š<strong>å¦‚ä½•åœ¨æ–‡æœ¬åˆ‡å¡Šçš„åŒæ™‚ï¼Œç›¡å¯èƒ½åœ°ä¿ç•™èªæ„ç­‰ç´šçš„è³‡è¨Šã€‚</strong></p> <h3 id="éš¨è‘—-llm-å¯æ¥å—çš„-context-è®Šé•·ç‚ºä»€éº¼é‚„éœ€è¦-rag">éš¨è‘— LLM å¯æ¥å—çš„ context è®Šé•·ï¼Œç‚ºä»€éº¼é‚„éœ€è¦ RAGï¼Ÿ</h3> <blockquote> <p>Why Retrieval? â€¦ However, as Liu et al. (2023) and Sun et al. (2021) have noted, models tend to underutilize long-range context and see diminishing performance as context length increases, especially when pertinent information is embedded within a lengthy context.</p> </blockquote> <p>ç•¶ä»Š LLM ç™¼å±•è¶¨å‹¢çš„å…¶ä¸­ä¸€é …æ˜¯ï¼šå¯ä»¥è¼¸å…¥ LLM çš„ token è¶Šä¾†è¶Šé•·ã€‚ä¾‹å¦‚ï¼šGPT-4o (128k), Claude 3.5 Sonnet (200k)ã€‚</p> <p>é€™æ™‚ä½ å¯èƒ½æœƒæƒ³ï¼Œå¦‚æœå¯ä»¥ç°¡å–®åœ°å°‡æ‰€æœ‰ context ä¸€æ¬¡é¤µçµ¦ LLMï¼Œé‚£é‚„æä»€éº¼ RAGï¼Œç°¡å–®åœ°æŠŠæ‰€æœ‰æ±è¥¿å¡çµ¦ LLM å°±å®Œäº‹å•¦ï½</p> <p>ç•¶ç„¶å¯¦å‹™ä¸Šï¼Œå¦‚æœåªæ˜¯è¦ Demo æä¸€å€‹ Baseline ç‰ˆæœ¬ï¼Œé€™æ¨£çš„åšæ³•ç•¶ç„¶æ²’æœ‰å•é¡Œã€‚ä¸éå¦‚æœå°æ¨¡å‹è¼¸å‡ºçš„è³ªé‡æœ‰æ‰€è¿½æ±‚çš„è©±ï¼Œé‚£éº¼å¿…é ˆçŸ¥é“ context éé•·æœ‰ä»¥ä¸‹çš„ç¼ºé»ï¼š</p> <ol> <li><strong>è¼ƒé•·çš„ context æ¨¡å‹è¶Šé›£ä»¥ç†è§£ï¼Œè¼¸å‡ºçš„è³ªé‡è¼ƒå·®ã€‚</strong></li> <li><strong>è¼ƒé•·çš„ context ç¶“å¸¸ä¼´éš¨è‘—ç„¡é—œçš„å…§å®¹ï¼Œé€™å°æ¨¡å‹ç†è§£é€ æˆè² é¢å½±éŸ¿ã€‚</strong></li> <li><strong>è¼ƒé•·çš„ context è²´åˆæ…¢ã€‚</strong></li> </ol> <p>åŸºæ–¼ä¸Šé¢é€™ä¸‰é»ï¼Œç›®å‰ RAG é‚„æ˜¯éå¸¸é©åˆæ‡‰ç”¨åœ¨ LLM ç”¢å“ä¸­ï¼ï¼ˆæš«æ™‚é‚„ä¸æœƒè¢«æ·˜æ±°ï¼‰</p> <h2 id="solution">Solution</h2> <h3 id="æ ¸å¿ƒæ¦‚å¿µ-idea">æ ¸å¿ƒæ¦‚å¿µ (Idea)</h3> <p>å‰é¢æéï¼Œç•¶å‰ç°¡æ˜“çš„ RAG ç³»çµ±æœ€å¤§çš„å•é¡Œåœ¨æ–¼ï¼šåˆ†å‰²æ–‡æœ¬æ™‚ï¼Œå®¹æ˜“ä¸Ÿå¤±é—œéµè¨Šæ¯ï¼Œé€ æˆåˆ‡å¡Šçš„æ–‡æœ¬ä¹‹é–“çš„èªæ„ä¸å®Œæ•´ï¼Œå°è‡´æª¢ç´¢ä¸å¤ ç²¾ç¢ºã€‚</p> <p>é‚£éº¼æ€éº¼ä¿ç•™ä¸Ÿå¤±çš„é—œéµè¨Šæ¯å‘¢ï¼Ÿ</p> <p>æœ¬æ–‡æå‡ºçš„è§£æ³•æ€è·¯éå¸¸ç°¡æ½”ï¼š<strong>é€éä¸æ–·åœ°ç¾¤èšå†ç¸½çµï¼Œç”¢ç”Ÿä¸€å€‹éšå±¤å¼çš„æ¶æ§‹ä¾†ç›¡å¯èƒ½ä¿ç•™èªæ„ç›¸ä¼¼çš„è³‡è¨Šã€‚</strong></p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/paper/RAPTOR_Recursive_Abstractive_Processing_for_Tree-Organized_Retrieval/raptor_figure1-480.webp 480w,/assets/img/paper/RAPTOR_Recursive_Abstractive_Processing_for_Tree-Organized_Retrieval/raptor_figure1-800.webp 800w,/assets/img/paper/RAPTOR_Recursive_Abstractive_Processing_for_Tree-Organized_Retrieval/raptor_figure1-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/paper/RAPTOR_Recursive_Abstractive_Processing_for_Tree-Organized_Retrieval/raptor_figure1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="RAPTOR Tree Architecture" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Figure 1. RAPTOR Tree Architecture Overview. </div> <p>é€™ç¯‡è«–æ–‡çš„æ–¹æ³•æ˜¯å°‡ leaf layerï¼ˆæœ€åŸå§‹åˆ†å¡Šå¾Œçš„æ–‡æœ¬ï¼‰å…ˆåšä¸€æ¬¡åˆ†ç¾¤ï¼Œæ¥è‘—æŠŠç¾¤è£¡æ–‡æœ¬åˆ†åˆ¥é€²è¡Œä¸€æ¬¡ç¸½çµï¼Œå¾è€Œç”¢ç”Ÿå‡ºæ–° layer çš„æ–‡æœ¬ï¼ˆå°æ‡‰åœ–ä¸­ 6,7,8ï¼‰ã€‚ä¸æ–·åœ°å¾ªç’°é€™å€‹éç¨‹ï¼Œç›´åˆ°é”åˆ°é è¨­çš„ layer ä¸Šé™ï¼Œæœ€çµ‚å°±å¯ä»¥å»ºæ§‹å‡ºä¸€å€‹æ¨¹çš„çµæ§‹ï¼Œæ¯ä¸€å±¤ layer éƒ½æ¶µè“‹å‰ä¸€å±¤ layer ç›¸é—œæ–‡æœ¬çš„å®Œæ•´è³‡è¨Šã€‚</p> <p>ç°¡å–®ä¾†èªªï¼Œæ•´å€‹æµç¨‹å¤§è‡´å¦‚ä¸‹ï¼š</p> <ol> <li> <strong>å…ˆå°‡åŸå§‹çš„æ–‡æœ¬åˆ†å¡Šï¼Œå¾—åˆ°ç¬¬ä¸€å±¤ layer (leaf layer)ã€‚</strong> Ex: ä¸€ç¯‡æ–‡ç«  â†’ 5å€‹ chunks (Figure 1. ä¸­çš„ 1,2,3,4,5)</li> <li> <strong>å°è©²å±¤çš„æ–‡æœ¬é€²è¡Œåˆ†ç¾¤ã€‚</strong> Ex: 5 chunks â†’ 3å€‹èšé¡ (Figure 1. ä¸­çš„ layer 2 ç°è‰²å€åŸŸ)</li> <li> <strong>å°æ¯å€‹ç¾¤çš„æ–‡æœ¬é€²è¡Œ summaryï¼Œå¾—åˆ°ä¸‹ä¸€å±¤çš„æ–‡æœ¬ã€‚</strong> Ex: 3 å€‹èšé¡ â†’ 3å€‹æ–°æ–‡æœ¬ (Figure 1. ä¸­çš„ 3,5 ç”¢ç”Ÿä¸€å€‹ summary å¾—åˆ°æ–°å±¤ç´šçš„æ–‡æœ¬ 6)</li> <li> <strong>é‡è¤‡ 2~3 æ­¥é©Ÿï¼Œç›´åˆ°é”åˆ° Max layerã€‚</strong> Ex: Figure 1. ä¸­æœ€å¤§çš„ layer çœ‹èµ·ä¾†æ˜¯ 3 å±¤</li> </ol> <h3 id="åˆ†ç¾¤-clustering">åˆ†ç¾¤ (Clustering)</h3> <blockquote> <p>Clustering plays a key role in building the RAPTOR tree, organizing text segments into cohesive groups. This step groups related content together, which helps the subsequent retrieval process.</p> </blockquote> <p>RAPTOR é€™ç¯‡è«–æ–‡æœ€é‡è¦çš„å°±æ˜¯åˆ†ç¾¤ã€‚æœ¬è³ªä¸Šï¼Œæ•´ç¯‡è«–æ–‡å°±æ˜¯é€ééè¿´åˆ†ç¾¤æ³•ï¼Œç”¢ç”Ÿä¸€å€‹éšå±¤ç‹€çš„æ–‡æœ¬æ¶æ§‹ï¼Œè®“ RAG ç³»çµ±å¾—åˆ°æ›´è±æ²›çš„ contextã€‚</p> <p>åœ¨å¯¦ä½œä¸­ï¼Œç‚ºäº†è®“åˆ†ç¾¤æ•ˆæœæ›´å¥½ï¼Œä½œè€…åšäº†ä¸€äº›ç‰¹åˆ¥è™•ç†ï¼š</p> <h4 id="soft-clustering">Soft Clustering</h4> <blockquote> <p>One of the unique aspects of our clustering approach is the use of soft clustering, where nodes can belong to multiple clusters without requiring a fixed number of clusters. This flexibility is essential because individual text segments often contain information relevant to various topics, thereby warranting their inclusion in multiple summaries.</p> </blockquote> <p>ç¾å¯¦ä¸­ï¼Œä¸€å€‹æ–‡æœ¬ç•¶ç„¶ä¸åªä¸€ç¨®é¡å‹ã€‚å› æ­¤ä½œè€…è€ƒæ…®ç”¨è»Ÿåˆ†ç¾¤ (soft clustering) çš„åˆ†ç¾¤æ¼”ç®—æ³•ï¼Œå°±æ˜¯ <strong>Gaussian Mixture Model (GMM)</strong>ã€‚</p> <p>å¦‚æœå° GMM ä¸ç†Ÿä¹Ÿæ²’é—œä¿‚ï¼ŒGMM å‡è¨­ä¸€å€‹æ–‡æœ¬å¯èƒ½ä¾†è‡ªæ–¼å¤šå€‹ç¾¤ï¼Œåªæ˜¯å±¬æ–¼æ¯å€‹ç¾¤çš„æ©Ÿç‡ä¸åŒã€‚</p> <h4 id="dimension-reduction--umap">Dimension Reduction â€” UMAP</h4> <blockquote> <p>The high dimensionality of vector embeddings presents a challenge for traditional GMMs, as distance metrics may behave poorly when used to measure similarity in high-dimensional spaces (Aggarwal et al., 2001). To mitigate this, we employ Uniform Manifold Approximation and Projection (UMAP), a manifold learning technique for dimensionality reduction (McInnes et al., 2018).</p> </blockquote> <p>ä½œè€…æŒ‡å‡ºï¼ŒGMM åœ¨é«˜ç¶­åº¦ç©ºé–“ä¸­æ•ˆæœä¸ä½³ï¼Œå› ç‚ºé«˜ç¶­åº¦ä¸‹è·é›¢è¨ˆç®—çš„æº–ç¢ºåº¦ä¸‹é™ï¼Œè€Œåˆ†ç¾¤çš„æœ¬è³ªå°±æ˜¯ç®—è·é›¢ã€‚å› æ­¤é€™é‚Šä½œè€…æ‰“ç®—å°‡ embedding å¾Œçš„æ–‡æœ¬åšé™ç¶­ï¼Œå…·é«”ä½¿ç”¨çš„æ–¹æ³•ç‚º <strong>UMAP</strong>ã€‚ï¼ˆæ¯”æ–¹æ–‡æœ¬ embedding å¾ŒåŸæœ¬æ˜¯ 768 ç¶­åº¦ï¼Œç”¨ UMAP é™åˆ° 20 ç¶­ï¼‰</p> <p>é‚£å¯¦å‹™ä¸­ï¼Œæ‡‰è©²é™åˆ°å¤šå°‘ç¶­åº¦ï¼Ÿ</p> <p>é›–ç„¶ä½œè€…æåˆ°é«˜ç¶­åº¦åˆ†ç¾¤æ•ˆæœä¸å¥½ä¾†è‡ªæ–¼ç›¸é—œè«–æ–‡çš„çµæœã€‚ä¸éè©²è«–æ–‡æ²’æåˆ°å…·é«”æ‡‰è©²è¦å¤šå°‘ç¶­åº¦ï¼Œä½†å…¶å¯¦é©—éƒ½æ˜¯åœ¨ç¶­åº¦ 20 åšçš„ï¼Œå¯ä»¥åƒè€ƒé€™å€‹æ•¸å€¼çœ‹çœ‹ã€‚</p> <h4 id="global--local-clustering">Global &amp; Local Clustering</h4> <blockquote> <p>â€¦it first identifies global clusters and then performs local clustering within these global clusters. This two-step clustering process captures a broad spectrum of relationships among the text data, from broad themes to specific details.</p> </blockquote> <p>ä½œè€…è¨­è¨ˆå…©éšæ®µçš„åˆ†ç¾¤æ–¹æ³•ï¼Œå…ˆå°ä¸€å±¤ layer å…ˆåšä¸€æ¬¡ global clusteringï¼Œæ¥è‘—å°æ¯å€‹ç¾¤è£¡é¢åˆ†åˆ¥å†åˆ†ä¸€æ¬¡ç¾¤ã€‚é€™æ¨£ä¸åƒ…èƒ½æ•æ‰é«˜å±¤ç´šçš„ç¾¤ï¼Œä¹Ÿèƒ½å…¼é¡§æ¯å€‹ç¾¤è£¡çš„ç´°éƒ¨é …ç›®ã€‚</p> <p>ç°¡å–®ä¾†èªªï¼Œå…©éšæ®µåˆ†ç¾¤å¯ä»¥æ•æ‰æ›´å¤šæ–‡æœ¬ä¹‹é–“çš„é—œä¿‚ã€‚é€™é‚Šå¤§è‡´ç­è§£ç‚ºå…©éšæ®µåˆ†ç¾¤çš„ç”¨æ„å°±å¥½ï¼Œæƒ³çŸ¥é“ç´°ç¯€å¯ä»¥å»çœ‹å¯¦ä½œã€‚</p> <h4 id="bayesian-information-criterion-bic">Bayesian Information Criterion (BIC)</h4> <p>åˆ†ç¾¤ä¸­æœ€å¸¸è¦‹çš„å•é¡Œå°±æ˜¯ç¾¤æ•¸è¦è¨­å¤šå°‘ï¼Ÿ</p> <p>ä½œè€…ç›´æ¥ç”¨ <strong>Bayesian Information Criterion</strong> ç®—è³‡è¨Šåˆ†æ•¸ä¾†æ±ºå®šè¦åˆ†å¤šå°‘ç¾¤ã€‚ä¸‹é¢æ˜¯è¨ˆç®—å…¬å¼ï¼š</p> \[BIC = -2 \ln(L) + k \ln(N)\] <p>å…¶ä¸­ N è¡¨ç¤ºæ–‡æœ¬ç‰‡æ®µçš„æ•¸é‡ï¼Œk è¡¨ç¤ºæ¨¡å‹åƒæ•¸çš„æ•¸é‡ï¼Œè€Œ L æ˜¯æ¨¡å‹çš„æœ€å¤§æ¦‚ä¼¼å‡½æ•¸å€¼ã€‚</p> <h3 id="æª¢ç´¢-retrieve">æª¢ç´¢ (Retrieve)</h3> <p>å‰é¢çš„éƒ¨åˆ†éƒ½æ˜¯åœ¨è¬›æ€éº¼å»ºç«‹çŸ¥è­˜åº«ï¼Œæ¥ä¸‹ä¾†è¦è¬›è¦æ€éº¼æª¢ç´¢ã€‚</p> <p>å…±æœ‰å…©ç¨®æ–¹æ³•ï¼Œå„æœ‰å„ªå‹¢ï¼š</p> <h4 id="tree-traversal-éæ­·æ¨¹">Tree Traversal (éæ­·æ¨¹)</h4> <p>ç°¡å–®ä¾†èªªï¼Œçµ¦å®š root çš„æ–‡æœ¬ï¼Œå°‡å…¶æ‰€æœ‰ children éƒ½æ‰¾å‡ºä¾†ç•¶ä½œ retrieve çš„ç›¸é—œæ–‡æœ¬ã€‚</p> <p><strong>å„ªé»ï¼š</strong> è³‡è¨Šé¡†ç²’åº¦å‡å‹»ã€æ‹¿åˆ°çš„æ–‡æœ¬åŒ…å«å»£æ³›å’Œè©³ç´°çš„æ–‡æœ¬ï¼Œè³‡è¨Šè±æ²›ä¸”å¤šæ¨£ã€‚</p> <p><strong>ç¼ºé»ï¼š</strong> æª¢ç´¢è¤‡é›œã€éœ€è¦èª¿æ•´çš„åœ°æ–¹æ¯”è¼ƒå¤šï¼ˆå¦‚æ¯ä¸€å±¤è¦æ‹¿å¹¾å€‹ï¼Ÿæ‹¿å¤šæ·±ï¼Ÿï¼‰</p> <p>å¯¦ä½œä¸­ï¼Œå‡è¨­æ¯ä¸€å±¤éƒ½æ‹¿æœ€ç›¸é—œçš„é‚£å€‹æ–‡æœ¬ã€‚</p> <h4 id="collapsed-tree-å£“ç¸®æ¨¹">Collapsed Tree (å£“ç¸®æ¨¹)</h4> <p>é€™å€‹æ›´ç°¡å–®ï¼Œç›´æ¥å°‡æ¨¹æ”¤å¹³ï¼Œæ‰€æœ‰æ–‡æœ¬éƒ½æ˜¯åŒä¸€å±¤çš„æƒ…æ³ä¸‹å»æŒ‘æœ€ç›¸é—œçš„æ–‡æœ¬ã€‚</p> <p><strong>å„ªé»ï¼š</strong> æª¢ç´¢ç°¡å–®ã€é©åˆå›ç­”ç‰¹å®šå•é¡Œï¼ˆé¡†ç²’åº¦æ°å¥½ï¼‰</p> <p><strong>ç¼ºé»ï¼š</strong> æª¢ç´¢é¡†ç²’åº¦ç²—ç´°åº¦ä¸å‡ã€éœ€è¦å°æ¯å€‹æ–‡æœ¬éƒ½åšæª¢ç´¢ï¼Œè¨ˆç®—æ¶ˆè€—æ¯”è¼ƒå¤§ã€‚</p> <h4 id="å¯¦å‹™ä¸Šå“ªç¨®æª¢ç´¢æ¯”è¼ƒå¥½">å¯¦å‹™ä¸Šå“ªç¨®æª¢ç´¢æ¯”è¼ƒå¥½ï¼Ÿ</h4> <p>ä½œè€…èªç‚º<strong>å£“ç¸®æ¨¹çš„è¡¨ç¾å¹³å‡ä¾†èªªå„ªæ–¼éæ­·æ¨¹</strong>ã€‚å› ç‚ºå£“ç¸®æ¨¹è€ƒæ…®æ‰€æœ‰æ–‡æœ¬çš„è³‡è¨Šç›¸é—œæ€§ï¼Œå¾—åˆ°çš„è³‡è¨Šé¡†ç²’åº¦é©åˆç”¨ä¾†å›ç­”ä¸€äº›ç‰¹å®šå•é¡Œã€‚åè§€éæ­·æ¨¹ï¼Œä¸è«–æ€éº¼è¨­å®šæ¯å±¤çš„æª¢ç´¢æ•¸ç›®ï¼Œæœ€å¾Œæ‹¿åˆ°çš„æ–‡æœ¬åŒ…å«ç²—ç´°çš„æ¯”ä¾‹éƒ½ä¿æŒä¸è®Šã€‚</p> <h2 id="ç¸½çµ">ç¸½çµ</h2> <ul> <li> <strong>é€™ç¯‡è«–æ–‡è§£æ±ºä»€éº¼å•é¡Œï¼Ÿ</strong> æ–‡æœ¬åˆ‡å‰² â†’ èªæ„ä¸å®Œæ•´ â†’ æª¢ç´¢ä¸æº–ç¢º</li> <li> <strong>è§£æ³•ï¼š</strong> éè¿´åˆ†ç¾¤ â†’ ç”¢ç”Ÿå¤šå±¤æ¬¡çš„æ–‡æœ¬ï¼Œä¿ç•™å®Œæ•´çš„èªæ„</li> </ul> <hr> <h2 id="references">References</h2> <ul> <li><a href="https://arxiv.org/abs/2307.03172" rel="external nofollow noopener" target="_blank">Lost in the Middle: How Language Models Use Long Contexts</a></li> <li><a href="https://arxiv.org/abs/2409.01666" rel="external nofollow noopener" target="_blank">In Defense of RAG in the Era of Long-Context Language Models</a></li> <li><a href="https://link.springer.com/chapter/10.1007/3-540-44503-X_27" rel="external nofollow noopener" target="_blank">On the Surprising Behavior of Distance Metrics in High Dimensional Space</a></li> <li><a href="https://arxiv.org/abs/2409.04701" rel="external nofollow noopener" target="_blank">Late Chunking: Balancing Precision and Cost in Long Context Retrieval</a></li> </ul> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="https://blog.google/technology/ai/google-gemini-update-flash-ai-assistant-io-2024/" target="_blank" rel="external nofollow noopener">Google Gemini updates: Flash 1.5, Gemma 2 and Project Astra</a> <svg width="1rem" height="1rem" viewbox="0 0 30 30" xmlns="http://www.w3.org/2000/svg"> <path d="M17 13.5v6H5v-12h6m3-3h6v6m0-6-9 9" class="icon_svg-stroke" stroke="#999" stroke-width="1.5" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path> </svg> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="https://medium.com/@al-folio/displaying-external-posts-on-your-al-folio-blog-b60a1d241a0a?source=rss-17feae71c3c4------2" target="_blank" rel="external nofollow noopener">Displaying External Posts on Your al-folio Blog</a> <svg width="1rem" height="1rem" viewbox="0 0 30 30" xmlns="http://www.w3.org/2000/svg"> <path d="M17 13.5v6H5v-12h6m3-3h6v6m0-6-9 9" class="icon_svg-stroke" stroke="#999" stroke-width="1.5" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path> </svg> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/3min-paper-illusion-thinking/">[3min-Paper] The_Illusion_of_Thinking</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/illusion-illusion-thinking-en/">The Illusion of the Illusion of Thinking: When AI Evaluation Methods Become Traps for Capability Assessment</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/illusion-illusion-thinking-chs/">[ä¸­æ–‡ç‰ˆ] The Illusion of the Illusion of Thinking: ç•¶AIè©•ä¼°æ–¹æ³•æˆç‚ºèƒ½åŠ›åˆ¤æ–·çš„é™·é˜±</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> Â© Copyright 2025 Yu-Cheng Chang. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>